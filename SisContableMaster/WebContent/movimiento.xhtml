<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>Movimientos</title>
</h:head>
<ui:include src="menu.xhtml" />
<h:body>
	<p:growl id="msj" />
	         <br></br>
		    <p:toolbar>
        <f:facet name="left">
            <p:commandButton  value="Nuevo" icon="pi pi-file"  oncomplete="PF('modal').show()" />
 
            <p:commandButton  value="Abrir" icon="pi pi-folder-open" />
 
            <span class="ui-separator">
                <span class="ui-icon pi pi-ellipsis-v" />
            </span>
 
            <p:commandButton type="button" title="Save" icon="pi pi-save" />
            <p:commandButton type="button" title="Delete" icon="pi pi-trash" />
            <p:commandButton type="button" title="Print" icon="pi pi-print" />
        </f:facet>
         </p:toolbar> 
         
	<h:form id="datos">   
		<p:dataTable value="#{movimientoController.listaMovimiento}" var="c"
			rows="5" paginator="true" >

			<p:column headerText="Fecha">
				<h:outputText value="#{c.fechaCreacion}" >
				<f:convertDateTime pattern="yyyy-MM-dd" />
				</h:outputText>
			</p:column>
			<p:column headerText="codPlanilla">
				<h:outputText value="#{c.codPlanilla}" />
			</p:column>
			<p:column headerText="Credito Fiscal">
				<h:outputText value="#{c.atributo1}" />
			</p:column>
			<p:column headerText="Nombre">
				<h:outputText value="#{c.cuentasContable.nombre}" />
			</p:column>
			<p:column headerText="Depto">
				<h:outputText value="#{c.departamento.nombre}" />
			</p:column>
			<p:column headerText="Proyecto">
				<h:outputText value="#{c.proyecto.nombre}" />
			</p:column>
			<p:column headerText="Oservaciones">
				<h:outputText value="#{c.observaciones}" />
			</p:column>
			<p:column headerText="total">
				<h:outputText value="#{c.total}" />
			</p:column>
			<p:column headerText="Cargar">
			<center>
            <p:commandButton icon="pi pi-search" action="#{movimientoController.cargarModal(c.idMovimiento)}"
             update=":datos :emergente"  oncomplete="PF('modal').show()" />
             </center>
            </p:column>
		</p:dataTable>
	</h:form>
	
		<h:form id="emergente">
	<p:dialog widgetVar="modal" modal="true" header="Emergente" showEffect="clip" draggable="true"  dynamic="true" >
	<p:ajax event="close" listener="#{movimientoController.limpiar()}" update="emergente" />
	<center>
	<p:panelGrid columns="3" styleClass="ui-noborder" style="margin-left:668px" >
	<p:column>
	<p:commandButton value="Guardar" action="#{movimientoController.insertar()}"
	 update="emergente :msj :datos" oncomplete="PF('modal').hide()" />
	</p:column>
	<p:column>
	<p:commandButton value="Editar"  />
	</p:column>
	<p:column>
	<p:commandButton value="Cancelar" oncomplete="PF('modal').hide()" />
	</p:column>
	</p:panelGrid>
	</center>
	<p:panelGrid columns="4" styleClass="ui-noborder">
	<p:column>
	<h:outputText value="Fecha"/>
	<p:clock pattern="yyyy-MM-dd" />
	</p:column>
	<p:column>
	<h:outputText value="No Gasto" />
	<p:inputText readonly="true" value="#{movimientoController.m.codPlanilla}" />
	</p:column>
	<p:column>
	<h:outputText value="Comprador" />
	<p:inputText readonly="true" value="#{movimientoController.m.atributo1}" />
	</p:column>
	<p:column>
	<h:outputText value="Autoriza" />
	<p:selectBooleanCheckbox value="#{selectBooleanView.value1}"/>
	</p:column>
	<p:column>
	<h:outputText value="idDoc" />
	<p:inputText readonly="true" value="#{movimientoController.m.idMovimiento}" />
	</p:column>
	<p:column>
	<h:outputText value="R.iva" />
	<p:selectBooleanCheckbox value="#{selectBooleanView.value1}"/>
	</p:column>
	<p:column></p:column>
	<p:column>
        <p:outputLabel for="estado" value="Estado:" />
        <p:selectOneRadio id="estado" value="#{movimientoController.m.estadoMovimiento}" unselectable="true">
            <f:selectItem itemLabel="Abierto" itemValue="0" />
            <f:selectItem itemLabel="Finalizado" itemValue="1" />
        </p:selectOneRadio>
	</p:column>
		<p:column>
	<p:selectOneMenu value="#{movimientoController.iddepa}">
	<f:selectItem itemLabel="Departamento" itemValue="0" noSelectionOption="true"  />
	<f:selectItems value="#{movimientoController.listaDepartamento}" var="c" 
	itemLabel="#{c.nombre}" itemValue="#{c.idDepartamento}" />
	</p:selectOneMenu>
	</p:column>
	<p:column></p:column>
	<p:column></p:column>
	<p:column></p:column>
	<p:column>
	<h:outputText value="Observaciones" />
	<p:inputText value="#{movimientoController.m.observaciones}" />
	</p:column>
	<p:column>
	<p:commandButton value="Guardar" action="#{movimientoController.probando()}"/>
	</p:column>
	<p:column></p:column>
	<p:column></p:column>
	<p:column></p:column>
	</p:panelGrid>
	<p:panel widgetVar="Movimiento"  header="Movimientos">
	<p:dataTable value="#{movimientoController.listaMovimiento}" var="c"
			rows="5" paginator="true">
			<p:column headerText="idMovimiento">
				<h:outputText value="#{c.idMovimiento}" />
			</p:column>
			<p:column headerText="codPlanilla">
				<h:outputText value="#{c.codPlanilla}" />
			</p:column>
			<p:column headerText="NombreMovimineto">
				<h:outputText value="#{c.nombreMovimiento}" />
			</p:column>
			<p:column headerText="Observaciones">
				<h:outputText value="#{c.observaciones}" />
			</p:column>
			<p:column headerText="total">
				<h:outputText value="#{c.total}" />
			</p:column>
		</p:dataTable>
		</p:panel>
	</p:dialog>
		</h:form>
	
</h:body>
</html>